<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panggil Aku Mooo!!!</title>
    
    <link href="style/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="style/fontawesome/css/all.min.css" rel="stylesheet">
    <!-- TAMBAHKAN INI: Memuat definisi font dari folder style/font/ -->
    <link href="style/font/bangbinfont.css" rel="stylesheet">
    <link rel="icon" href="image/favicon.ico" type="image/x-icon">

    <style>
        /* --- PENYESUAIAN RESPONSIP --- */
        html {
            /* Skala font dari 10px di 360px ke 18px di 1920px */
            /* Ini akan menskalakan semua unit 'rem' (termasuk margin, padding, gap) */
            font-size: calc(0.8000vw + 10.154px);
        }
        @media (max-width: 360px) {
            html { font-size: 10px; } /* Ukuran minimum */
        }
        @media (min-width: 1920px) {
            html { font-size: 18px; } /* Ukuran maksimum */
			#cow-btn, #sheep-btn, #horse-btn, #bee-btn, #duck-btn {
			height: 12rem !important;
			}

			/* Halaman Ayam */
			img[onclick="playInfoSound('ayam')"] {
				height: 9rem !important; 
			}
			#egg-nest, #egg-basket {
				width: 12rem;
				height: 8rem;
			}
			.fa-basket-shopping.md-display-1 {
				font-size: 7rem !important;
			}

			/* Kuis 2 Pasangkan */
			/* Kode ini akan menimpa aturan dari @media (min-width: 1600px) agar ukurannya lebih besar */
			.puzzle-piece {
				width: 10rem; 
				height: 10rem; 
			}
			.puzzle-piece img {
				width: 8rem; 
				height: 8rem; 
			}
        }

        @media (min-width: 3840px) {
            html { font-size: 32px; } /* Ukuran maksimum untuk 4K */
        }

        body {
            font-family: 'Fredoka', sans-serif;
            background-color: #fef3c7; 
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100vw; /* Gunakan lebar viewport penuh */
            height: 100vh; /* Gunakan tinggi viewport penuh */
            min-height: 100vh;
            overflow: hidden; /* Sesuai permintaan: tidak ada scroll */
            padding: 1rem;
            box-sizing: border-box;
        }
        .main-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center; /* Pusatkan buku & tombol */
            gap: 1vh; /* Jarak vertikal berbasis tinggi layar */
            width: 100%;
            height: 100%;
        }
        .font-title {
            font-family: 'Fredoka One', cursive;
			font-weight: 900;
        }
        
        .book-container {
            width: 95vw; /* Gunakan lebar di layar potret/ponsel */
            max-width: 1400px; /* Batas lebar maks di desktop besar */
            aspect-ratio: 1200 / 700;
            height: auto; /* Biarkan tinggi dihitung dari rasio aspek */
            max-height: 90vh; /* Batas tinggi maks agar tombol navigasi muat */
            position: relative;
            transform-style: preserve-3d;
            perspective: 1500px;
        }

        /* Aturan ini berlaku untuk layar lanskap (seperti 1920x1080) */
        @media (min-aspect-ratio: 1200/700) {
             .book-container {
                height: 90vh; /* Gunakan tinggi sebagai batasan */
                width: auto; /* Biarkan lebar dihitung dari rasio aspek */
                max-width: 95vw; /* Pastikan tidak melebihi lebar layar */
             }
        }

        .book {
            width: 50%;
            height: 100%;
            position: absolute;
            left: 50%;
            top: 0;
            transform-style: preserve-3d;
        }
        
        .page {
            position: absolute;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
            transform-origin: left;
            transition: transform 0.8s cubic-bezier(0.4, 0.2, 0.2, 1);
            transform: rotateY(0deg);
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
            border-radius: 0 24px 24px 0;
            cursor: pointer;
            user-select: none;
            will-change: transform;
        }
        .page.flipped {
            transform: rotateY(-180deg);
        }
        
        
        .page-content {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            box-sizing: border-box;
            padding: 1rem 1.5rem; /* Padding responsif untuk seluler */
            background-color: #f8fafc; 
            border-radius: 0 24px 24px 0;
            overflow-y: auto;
            overflow-x: hidden;
            color: #1e293b; 
        }
        /* Padding lebih besar untuk layar desktop */
        @media (min-width: 1024px) {
            .page-content {
                padding: 2rem 4rem;
            }
        }

        .page-content.back-side {
            transform: rotateY(180deg);
            border-radius: 24px 0 0 24px;
        }
        
        .flex-center-col {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            gap: 1rem;
        }
        .cover {
            
            color: white;
        }
        
        
        .navigation-buttons {
            position: relative;
            display: flex;
            gap: 1rem; /* Diubah dari 15px ke unit 'rem' agar responsif */
            align-items: center; 
            z-index: 1001; 
        }

        /* --- Tombol Navigasi Responsif --- */
        .nav-button {
            background-color: #2563eb; 
            color: white;
            border: none;
            border-radius: 50%;
            width: 44px; /* Ukuran seluler */
            height: 44px;
            font-size: 18px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.1s ease-in-out;
            box-shadow: 0 4px 0 #1e40af; /* Bayangan seluler */
        }
        .nav-button:active {
            transform: translateY(2px); /* Gerakan tekan seluler */
            box-shadow: 0 2px 0 #1e40af;
        }
        .nav-button:hover {
            background-color: #1d4ed8;
        }

        /* Ukuran lebih besar untuk tablet ke atas */
        @media (min-width: 768px) {
            .nav-button {
                width: 70px;
                height: 70px;
                font-size: 28px;
                box-shadow: 0 6px 0 #1e40af;
            }
            .nav-button:active {
                transform: translateY(4px);
                box-shadow: 0 2px 0 #1e40af;
            }
        }

        /* Aturan khusus untuk tombol mute yang lebih kecil */
        #mute-btn {
            width: 36px;
            height: 36px;
            font-size: 16px;
        }
        @media (min-width: 768px) {
            #mute-btn {
                width: 50px;
                height: 50px;
                font-size: 20px;
            }
        }

        
        .daftar-isi-item {
            display: flex;
            
            align-items: baseline;
            width: 100%; 
            font-size: 1.25rem; /* Ukuran dasar, akan ditimpa di media query */
            cursor: pointer; 
            transition: background-color 0.2s; 
            border-radius: 8px; 
            padding: 0.25rem 0.5rem; 
            margin: 0 -0.5rem; 
        }
        .daftar-isi-item:hover {
            background-color: #e2e8f0; 
        }
        
        
        .daftar-isi-item .dots {
            flex-grow: 1;
            border-bottom: 2px dotted #94a3b8;
            margin: 0 0.5rem;
            flex-shrink: 0; 
            position: relative;
            bottom: 4px;
        }
        .daftar-isi-item span:first-child {
            flex-grow: 0;
            flex-shrink: 0;
            white-space: nowrap;
        }
        .daftar-isi-item span:last-child {
            flex-grow: 0;
            flex-shrink: 0;
            min-width: 2rem; 
            text-align: right;
        }
        
        .daftar-isi-icon {
            width: 1.5rem; 
            margin-right: 0.5rem;
            text-align: center;
            display: inline-block;
            vertical-align: middle; 
        }
        
        
        .info-list {
            display: grid;
            grid-template-columns: auto 1fr; 
            gap: 0.25rem 0.5rem; 
            align-items: baseline; 
        }
        .info-list-label {
            font-weight: 700; 
            color: #212529; 
            position: relative;
            padding-right: 2rem; 
            white-space: nowrap;
        }
        .info-list-label::after {
            content: ":";
            position: absolute;
            right: 0.5rem;
            top: 0;
        }
        .info-list-value {
            
        }

        
        @keyframes milk-fill {
            from { height: 0; }
            to { height: 100%; }
        }
        .milk-fill-anim {
            animation: milk-fill 1s ease-out forwards;
        }
        
        @keyframes horse-run {
            0% { transform: translateX(-20px) rotate(-5deg); }
            50% { transform: translateX(30px) rotate(5deg); }
            100% { transform: translateX(-20px) rotate(-5deg); }
        }
        .horse-run-anim {
            animation: horse-run 1s ease-in-out;
        }

        
        @keyframes bee-fly {
            0% { transform: translate(0, 0) rotate(0deg); }
            25% { transform: translate(-10px, -10px) rotate(-15deg); }
            50% { transform: translate(10px, 0px) rotate(15deg); }
            75% { transform: translate(-5px, 10px) rotate(-10deg); }
            100% { transform: translate(0, 0) rotate(0deg); }
        }
        .bee-fly-anim {
            animation: bee-fly 0.5s ease-in-out;
        }

        
        .quiz-btn {
            background-color: #3b82f6; 
            color: white;
            font-family: 'Fredoka One', cursive;
            font-size: 1.25rem;
            padding: 0.75rem 1.5rem;
            border-radius: 12px;
            box-shadow: 0 4px 0 #1d4ed8; 
            transition: all 0.1s ease-in-out;
            border: none; 
        }
        .quiz-btn:active {
            transform: translateY(2px);
            box-shadow: 0 2px 0 #1d4ed8;
        }
        .quiz-btn:hover {
            background-color: #2563eb;
            color: white; 
        }

        
        .quiz-option {
            width: 6rem; 
            height: 6rem; 
            background-color: white;
            border-radius: 0.75rem; 
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1); 
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.2s;
            padding: 0.5rem;
            border: none; 
        }
        .quiz-option:hover {
            transform: scale(1.1);
            background-color: #f0f9ff; 
        }
        .quiz-option.correct {
            background-color: #dcfce7; 
            color: #166534; 
            
            box-shadow: 0 0 0 4px #22c55e;
        }
        .quiz-option.wrong {
            background-color: #fee2e2; 
            color: #991b1b; 
            
            box-shadow: 0 0 0 4px #ef4444;
        }
        
        .quiz-option img {
            width: 4rem; 
            height: 4rem; 
            object-fit: contain;
            pointer-events: none; 
        }


        
        .puzzle-piece {
            width: 5.5rem; 
            height: 5.5rem; 
            background-color: white;
            border-radius: 0.75rem; 
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1); 
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.2s;
            padding: 0.5rem;
            border: none; 
        }
        
        .puzzle-piece img {
            width: 4rem; 
            height: 4rem; 
            object-fit: contain;
            pointer-events: none; 
        }
        .puzzle-piece.selected {
            
            box-shadow: 0 0 0 4px #3b82f6;
            transform: scale(1.05);
        }
        .puzzle-piece.matched {
            opacity: 0.3;
            cursor: not-allowed;
            transform: scale(0.9);
        }
        .puzzle-shadow {
            
             background-color: #e5e7eb; 
        }
        
        .puzzle-shadow img {
            filter: grayscale(1) brightness(0) opacity(0.3);
        }
       
        .memory-card {
            width: 5rem; 
            height: 5.5rem; 
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.5s;
            cursor: pointer;
        }
        .memory-card .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 0.75rem; 
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1); 
            font-size: 2.5rem; 
            padding: 0.5rem;
        }
        
        .memory-card .card-front img {
            width: 4rem; 
            height: 4rem; 
            object-fit: contain;
        }
        .memory-card .card-front {
            background-color: white;
            color: #374151; 
            transform: rotateY(180deg);
        }
        .memory-card .card-back {
            background-color: #60a5fa; 
            color: white;
            font-size: 3rem; 
        }
        .memory-card.flipped {
            transform: rotateY(180deg);
        }
		
		.memory-card.matched {
            cursor: not-allowed;
        }
        
        
        .memory-card.matched .card-back {
            background-color: #22c55e; 
            color: white;
        }


        
        .egg-draggable {
            cursor: grab;
            transition: opacity 0.2s;
        }
        .egg-draggable.dragging {
            opacity: 0.4;
            cursor: grabbing;
        }
        .egg-draggable.placed {
            cursor: not-allowed;
            opacity: 0.8;
        }
        
        #egg-basket.drag-over {
            background-color: #fef08a; 
            border-style: solid;
        }
        
        #egg-nest, #egg-basket {
             background-color: #a16207; 
             border-color: #713f12; 
        }
        
        
        #puzzle-game-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
            width: 100%;
        }
        #puzzle-grid-target {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 4px;
            width: 12.25rem; /* Base size */
            height: 12.25rem;
            padding: 2px;
            background-color: #d1d5db; 
            border-radius: 0.5rem;
        }
        .puzzle-drop-zone {
            width: 6rem; /* Base size */
            height: 6rem;
            background-color: #e5e7eb;
            border: 2px dashed #9ca3af;
            border-radius: 0.25rem;
            transition: background-color 0.2s;
        }
        .puzzle-drop-zone.drag-over {
            background-color: #c7d2fe; 
            border-style: solid;
        }
        
        .puzzle-drop-zone .puzzle-piece-drag {
            width: 100%;
            height: 100%;
            box-shadow: none;
            border-radius: 0;
        }
        
        #puzzle-pieces-source {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 0.5rem;
            width: 100%;
            max-width: 15rem; /* Base size */
            min-height: 8rem; /* Base size */
        }
        .puzzle-piece-drag {
            width: 6rem; /* Base size */
            height: 6rem; 
            background-color: white;
            border-radius: 0.5rem; 
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1); 
            cursor: grab;
            transition: all 0.2s;
            
            background-size: 200% 200%; 
        }
        .puzzle-piece-drag.dragging {
            opacity: 0.4;
            cursor: grabbing;
            transform: scale(1.1);
        }
        .puzzle-piece-drag.placed {
            cursor: not-allowed;
            opacity: 1;
            transform: scale(1);
        }

        
        .penulis-bg {
            position: relative;
            z-index: 1; 
        }
        .penulis-bg::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: url('image/Ika2.png');
            background-size: cover;
            background-position: center;
            opacity: 0.3; 
            z-index: -1;
            border-radius: 24px 0 0 24px; 
        }

        
        .hover-scale {
            transition: transform 0.2s;
        }
        .hover-scale:hover {
            transform: scale(1.1);
        }
        @media (min-width: 768px) {
            .img-md-larger {
                width: 10rem !important;
                height: 10rem !important;
            }
            .md-h-150 {
                height: 150px !important; /* Consider using rem here too? 9.375rem */
            }
            .md-h-100 {
                height: 100px !important; /* 6.25rem */
            }
            .md-w-h-20 {
                width: 5rem !important;
                height: 5rem !important;
            }
        }
        .space-y-1 > * + * { margin-top: 0.25rem; }
        .space-y-2 > * + * { margin-top: 0.5rem; }
        .space-y-3 > * + * { margin-top: 0.75rem; }
        .text-purple { color: #a855f7; }
        .text-purple-emphasis { color: #581c87; }
        .text-teal-emphasis { color: #115e59; }
        .text-indigo-emphasis { color: #3730a3; }
        .text-orange-emphasis { color: #9a3412; }
        .text-orange-200 { color: #fed7aa; }
        .hover-scale-150 {
            transition: transform 0.2s;
        }
        .hover-scale-150:hover { transform: scale(1.5); }
        .petunjuk-item {
            transition: background-color 0.2s;
        }
        .petunjuk-item:hover {
            background-color: #e2e8f0; 
        }
        .hover-text-primary:hover {
            color: #0d6efd !important; 
        }
        
        
        .bg-teal-500 { background-color: #14b8a6 !important; }
        .bg-teal-500:hover { background-color: #0d9488 !important; }
        .shadow-teal-700 { box-shadow: 0 4px 0 #0f766e; }
        .shadow-teal-700:active { box-shadow: 0 2px 0 #0f766e; }
        
        .bg-indigo-500 { background-color: #6366f1 !important; }
        .bg-indigo-500:hover { background-color: #4f46e5 !important; }
        .shadow-indigo-700 { box-shadow: 0 4px 0 #4338ca; }
        .shadow-indigo-700:active { box-shadow: 0 2px 0 #4338ca; }
        
        .bg-orange-500 { background-color: #f97316 !important; }
        .bg-orange-500:hover { background-color: #ea580c !important; }
        .shadow-orange-700 { box-shadow: 0 4px 0 #c2410c; }
        .shadow-orange-700:active { box-shadow: 0 2px 0 #c2410c; }
        
        .bg-gradient-bangbin1 {
            background-image: linear-gradient(to bottom right, #ffffff, #69d86f);
        }
        .bg-gradient-bangbin2 {
            background-image: linear-gradient(to top, #ffffff, #72abe0);
        }
        .bg-gradient-bangbin3 {
            background-image: linear-gradient(to top, #ffffff, #e48ce7);
        }		

        /* --- PENYESUAIAN UKURAN GAMBAR UNTUK LAYAR BESAR --- */
        @media (min-width: 1600px) {
             /* Perbesar gambar & kontainer kuis */
            .quiz-option {
                width: 8rem; 
                height: 8rem; 
            }
            .quiz-option img {
                width: 6rem; 
                height: 6rem; 
            }

            /* Perbesar gambar & kontainer puzzle pasangkan */
             .puzzle-piece {
                width: 7rem; 
                height: 7rem; 
            }
            .puzzle-piece img {
                width: 5rem; 
                height: 5rem; 
            }

             /* Perbesar gambar & kontainer kartu memori */
            .memory-card {
                width: 6.5rem; 
                height: 7rem; 
            }
             .memory-card .card-front img {
                width: 5rem; 
                height: 5rem; 
            }
            #memory-grid {
                 gap: 1rem; /* Sedikit perbesar jarak antar kartu */
            }

            /* Perbesar gambar hewan di Galeri Suara */
             .md-w-h-20 { /* Target class for gallery images */
                width: 7rem !important;
                height: 7rem !important;
            }

            /* Perbesar grid & potongan puzzle Kuis 4 */
            #puzzle-grid-target {
                width: 16.25rem; 
                height: 16.25rem;
            }
            .puzzle-drop-zone {
                width: 8rem;
                height: 8rem;
            }
            #puzzle-pieces-source {
                max-width: 18rem; 
                min-height: 10rem;
            }
             .puzzle-piece-drag {
                width: 8rem; 
                height: 8rem; 
            }
        }

        /* --- PENYESUAIAN UKURAN FONT TEXT KECIL UNTUK LAYAR BESAR --- */
        @media (min-width: 1200px) {
			.fs-5 {
                /* Perbesar angka di dalam calc() ini */
                font-size: calc(0.208vw + 1.2rem) !important; 
            }
            .fs-6 {
                 /* Perbesar angka di dalam calc() ini */
                font-size: calc(0.208vw + 1.1rem) !important;
            }
            .daftar-isi-item {
                 /* Perbesar angka di dalam calc() ini */
                font-size: calc(0.208vw + 1.2rem) !important;
            }
        }

    </style>
</head>
<body>

    <div class="main-wrapper">
        <div class="book-container">
            <div class="book" id="book">
                
                <!-- HALAMAN 1 (Sampul Depan & Info Penerbit) -->
                <div class="page">
                    <div class="page-content cover flex-center-col text-white" style="background-image: url('image/Sampul.png'); background-size: cover; background-position: center;">

                    </div>
                    <div class="page-content back-side d-flex justify-content-center align-items-center bg-white h-100">                    
                        <a href="https://www.kemdikbud.go.id" target="_blank" class="d-block hover-scale" title="Kunjungi Website Kemdikbud">
                            <img src="image/favicon.ico" alt="Logo Kemdikbud" class="object-fit-contain mb-5 img-md-larger" style="width: 10rem; height: 10rem;">
                        </a>
                    </div>
                </div>

                <!-- HALAMAN 2 (PETUNJUK) -->
                <div class="page">
                    <!-- Depan Halaman 2 (Petunjuk) -->
                    <div class="page-content d-flex flex-column bg-gradient-bangbin2">
                        <h2 class="fs-3 mb-5 font-title text-center text-primary-emphasis">Panggil Aku Mooooo!!!</h2>
                        <br><br>

                        <div class="container-fluid fs-6 fs-md-5 text-secondary-emphasis p-0 info-list">
                            <span class="info-list-label">Tema</span>
                            <span class="info-list-value">Mahluk Ciptaan Tuhan</span>
                            
                            <span class="info-list-label">Subtema</span>
                            <span class="info-list-value">Hewan</span>
                            
                            <span class="info-list-label">Materi</span>
                            <span class="info-list-value">Hewan Ternak</span>
                            
                            <span class="info-list-label">PAUD</span>
                            <span class="info-list-value">4-5 tahun</span>
                        </div>
						
                        <div class="mt-4">
                            <p class="fs-6 info-list-label">Tujuan Pembelajaran:</p>
                            <ul class="fs-5 ps-4 fs-sm fs-md-6 text-secondary space-y-1 mt-1 mb-1" style="list-style-type: disc;">
                                <li>Mengenal nama-nama hewan ternak.</li>
                                <li>Memahami ciri hewan ternak.</li>
                            </ul>
                        </div>

                        
                        <div class="fs-5 fs-sm fs-md-6 text-secondary mt-4 info-list">
                            <span class="info-list-label">Penulis</span>
                            <span class="info-list-value">Ika Nirmala, M.Pd</span>
                            
                            <span class="info-list-label">Hak Cipta</span>
                            <span class="info-list-value">
                                Direktorat Jendral PAUD<br>
                                Kementrian Pendidikan Dasar dan Menengah
                            </span>
                            
                            <span class="info-list-label">Terbitan</span>
                            <span class="info-list-value">Pertama, 2025</span>
                        </div>
                    </div>

                    <div class="page-content back-side d-flex flex-column bg-gradient-bangbin3">
                        <h2 class="fs-2 mb-5 font-title text-center text-primary-emphasis">Petunjuk Penggunaan</h2>

                        <div class="d-flex flex-column align-items: center w-100 gap-4">
                            <div class="space-y-2 text-start">
                                <div class="d-flex align-items: center gap-4 fs-5 petunjuk-item cursor-pointer rounded-3 p-2" data-sound="petunjuk1">
                                    <i class="fa-solid fa-arrows-left-right text-center fs-3 text-primary" style="width: 2.5rem;"></i>
                                    <span>Kamu bisa klik panah di bawah buku atau klik halaman untuk membalik lembar buku.</span>
                                </div>
                                <div class="d-flex align-items: center gap-4 fs-5 petunjuk-item cursor-pointer rounded-3 p-2" data-sound="petunjuk2">
                                    <i class="fa-solid fa-hand-pointer text-center fs-3 text-purple" style="width: 2.5rem;"></i>
                                    <span>Klik pada hewannya untuk mendengarkan keteranganya yaah!</span>
                                </div>
                                <div class="d-flex align-items: center gap-4 fs-5 petunjuk-item cursor-pointer rounded-3 p-2" data-sound="petunjuk3">
                                    <i class="fa-solid fa-volume-high text-center fs-3 text-success" style="width: 2.5rem;"></i>
                                    <span>Pada halaman suara hewan, Klik hewannya untuk mendengarkan suara.</span>
                                </div>
                                 <div class="d-flex align-items: center gap-4 fs-5 petunjuk-item cursor-pointer rounded-3 p-2" data-sound="petunjuk4">
                                    <i class="fa-solid fa-question-circle text-center fs-3 text-danger" style="width: 2.5rem;"></i>
                                    <span>Ayo! Selesaikan permainan mencocokkan suara, memasangakan gambar, mencari gambar yang sama, merangkai potongan gambar hewan di akhir buku!</span>
                                </div>
                            </div>

                            <p class="text-center text-secondary fs-5 mt-4 fw-medium">
                                Klik setiap petunjuk di atas untuk mendengarkan penjelasannya.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- HALAMAN 3 (Daftar Isi & Sapi) -->
                <div class="page">
                    <div class="page-content d-flex flex-column bg-gradient-bangbin2">
                        <h2 class="display-6 text-primary-emphasis mb-5 font-title text-center">Daftar Isi</h2>
                        <div class="space-y-2 text-secondary-emphasis w-100"> 
                            <div class="daftar-isi-item" data-target-page="3">
                                <span><img src="image/Sapi.png" alt="Ikon Sapi" class="daftar-isi-icon"> Sapi</span>
                                <span class="dots"></span>
                                <span>3</span>
                            </div>
                            <div class="daftar-isi-item" data-target-page="3">
                                <span><img src="image/Domba.png" alt="Ikon Domba" class="daftar-isi-icon"> Domba</span>
                                <span class="dots"></span>
                                <span>4</span>
                            </div>
                            <div class="daftar-isi-item" data-target-page="4">
                                <span><img src="image/Ayam.png" alt="Ikon Ayam" class="daftar-isi-icon"> Ayam</span>
                                <span class="dots"></span>
                                <span>5</span>
                            </div>
                            <div class="daftar-isi-item" data-target-page="4">
                                <span><img src="image/Kuda.png" alt="Ikon Kuda" class="daftar-isi-icon"> Kuda</span>
                                <span class="dots"></span>
                                <span>6</span>
                            </div>
                            <div class="daftar-isi-item" data-target-page="5">
                                <span><img src="image/Lebah.png" alt="Ikon Lebah" class="daftar-isi-icon"> Lebah</span>
                                <span class="dots"></span>
                                <span>7</span>
                            </div>
                            <div class="daftar-isi-item" data-target-page="5">
                                <span><img src="image/Bebek.png" alt="Ikon Bebek" class="daftar-isi-icon"> Bebek</span>
                                <span class="dots"></span>
                                <span>8</span>
                            </div>
                            <!-- Item Tambahan -->
                            <div class="daftar-isi-item" data-target-page="6">
                                <span><i class="fa-solid fa-volume-high daftar-isi-icon"></i> Galeri Suara</span>
                                <span class="dots"></span>
                                <span>9</span>
                            </div>
                            <div class="daftar-isi-item" data-target-page="6">
                                <span><i class="fa-solid fa-puzzle-piece daftar-isi-icon"></i> Kuis Seru</span>
                                <span class="dots"></span>
                                <span>10</span>
                            </div>
                            <div class="daftar-isi-item" data-target-page="8">
                                <span><i class="fa-solid fa-book daftar-isi-icon"></i> Daftar Pustaka</span>
                                <span class="dots"></span>
                                <span>14</span>
                            </div>
                            <div class="daftar-isi-item" data-target-page="9">
                                <span><i class="fa-solid fa-user daftar-isi-icon"></i> Penulis</span>
                                <span class="dots"></span>
                                <span>15</span>
                            </div>
                        </div>
                    </div>
                    <!-- Belakang Halaman 3 (Sapi) -->
                    <div class="page-content back-side flex-center-col gap-4" style="background-image: url('image/bg2.png'); background-size: cover; background-position: center;">
                        <h2 class="display-5 text-success-emphasis font-title">Halo, aku Sapi!</h2>
                        <div class="d-flex flex-column align-items: center justify-content-center position-relative my-4">
                            <div id="milk-interaction" class="position-absolute border border-4 border-secondary-subtle rounded-top-pill rounded-bottom d-none overflow-hidden" style="bottom: -2rem; right: -2.5rem; width: 5rem; height: 7rem; background-color: #e9ecef;">
                                <div id="milk-fill" class="position-absolute bottom-0 start-0 w-100 bg-white"></div>
                            </div>
                            <img id="cow-btn" src="image/Sapi.png" alt="Sapi" class="w-auto cursor-pointer transition-transform hover-scale active-scale-95 shadow-lg md-h-150" style="height: 8rem;">
                        </div>
                        <p class="fs-4 text-success-dark text-center">
                            Aku senang makan rumput. Kalau aku senang, aku bilang... <strong class="fs-3 font-title">MOOO!</strong>
                            <span class="d-block fs-5 mt-2">(Klik aku untuk memberi susu!)</span>
                        </p>
                    </div>
                </div>

                <!-- HALAMAN 4 (Domba & Ayam) -->
                <div class="page">
                    <!-- Depan Halaman 4 (Domba) -->
                    <div class="page-content flex-center-col gap-4" style="background-image: url('image/bg2.png'); background-size: cover; background-position: center;">
                        <h2 class="display-5 text-info-emphasis font-title">Hai, aku Domba!</h2>
                        <div class="d-flex flex-column align-items: center justify-content-center position-relative my-4">
                            <i id="wool-interaction" class="fa-solid fa-shirt fs-1 text-purple position-absolute opacity-0 transition-all duration-500 d-none" style="top: -2rem; right: -1.25rem;"></i>
                            <img id="sheep-btn" src="image/Domba.png" alt="Domba" class="w-auto cursor-pointer transition-transform hover-scale active-scale-95 shadow-lg md-h-150" style="height: 8rem;">
                        </div>
                        <p class="fs-4 text-info-dark text-center">
                            Lihat buluku, tebal sekali! Suaraku... <strong class="fs-3 font-title">MBEEE!</strong>
                            <span class="d-block fs-5 mt-2">(Klik aku untuk lihat wol!)</span>
                        </p>
                    </div>
                    <!-- Belakang Halaman 4 (Ayam) -->
                    <div class="page-content back-side flex-center-col gap-4" style="background-image: url('image/bg2.png'); background-size: cover; background-position: center;">
                        <h2 class="display-5 text-danger-emphasis font-title">Petok! Aku Ayam!</h2>
                        
                        <div class="d-flex flex-column align-items: center justify-content-center w-100 my-4">
                            <div class="d-flex align-items-end justify-content-center gap-4 w-100">
                                <div class="d-flex flex-column align-items: center">
                                    <img src="image/Ayam.png" alt="Ayam" class="w-auto shadow-lg mb-2 cursor-pointer md-h-100" style="height: 6rem;" onclick="playInfoSound('ayam')">
                                    
                                    <div id="egg-nest" class="rounded-pill d-flex align-items-center justify-content-center gap-1 p-2 border border-4 border-dashed" style="width: 9rem; height: 6rem;">
                                        <i id="egg1" class="fa-solid fa-egg fs-1 text-orange-200 egg-draggable" draggable="true"></i>
                                        <i id="egg2" class="fa-solid fa-egg fs-1 text-orange-200 egg-draggable" draggable="true"></i>
                                        <i id="egg3" class="fa-solid fa-egg fs-1 text-orange-200 egg-draggable" draggable="true"></i>
                                    </div>
                                    <span class="fs-5 text-danger-emphasis fw-medium mt-1">Sarang</span>
                                </div>

                                <!-- Keranjang (Target) -->
                                <div class="d-flex flex-column align-items: center">
                                    <i class="fa-solid fa-basket-shopping display-3 md-display-1 text-warning-emphasis shadow-lg mb-2"></i>
                                    <div id="egg-basket" class="rounded-3 d-flex align-items: center justify-content-center gap-1 p-2 border border-4 border-dashed" style="width: 9rem; height: 6rem;">
                                        <!-- Tempat telur diletakkan -->
                                    </div>
                                    <span class="fs-5 text-danger-emphasis fw-medium mt-1">Keranjang</span>
                                </div>
                            </div>
                        </div>
                        
                        <p class="fs-4 text-danger-dark text-center">
                            Bantu aku memindahkan telur ke keranjang!
                            <span class="d-block fs-5 mt-2">(Drag dan drop telur!)</span>
                        </p>
                        <p id="egg-feedback" class="fs-4 font-title text-success" style="height: 1.5rem;"></p>
                    </div>
                </div>

                <!-- HALAMAN 5 (Kuda & Lebah) -->
                <div class="page">
                    <!-- Depan Halaman 5 (Kuda) -->
                    <div class="page-content flex-center-col gap-4" style="background-image: url('image/bg2.png'); background-size: cover; background-position: center;">
                        <h2 class="display-5 text-warning-emphasis font-title">Whoosh! Aku Kuda!</h2>
                        <div class="d-flex flex-column align-items: center justify-content-center position-relative my-4">
                            <img id="horse-btn" src="image/Kuda.png" alt="Kuda" class="w-auto cursor-pointer shadow-lg md-h-150" style="height: 8rem;">
                        </div>
                        <p class="fs-4 text-warning-dark text-center">
                            Aku pelari cepat! Dengarkan suaraku... <strong class="fs-3 font-title">HIIII-HA!</strong>
                            <span class="d-block fs-5 mt-2">(Klik aku untuk berlari!)</span>
                        </p>
                    </div>
                    <!-- Belakang Halaman 5 (Lebah) -->
                    <div class="page-content back-side flex-center-col gap-4" style="background-image: url('image/bg2.png'); background-size: cover; background-position: center;">
                        <h2 class="display-5 text-orange-emphasis font-title">MMumm! Aku Lebah!</h2>
                        <div class="d-flex flex-column align-items: center justify-content-center position-relative my-4">
                            <img id="bee-btn" src="image/Lebah.png" alt="Lebah" class="w-auto cursor-pointer shadow-lg md-h-150" style="height: 8rem;">
                        </div>
                        <p class="fs-4 text-orange-dark text-center">
                            Hal yang paling aku suka adalah membuat... madu! <strong class="fs-3 font-title">Muuummm!</strong>
                            <span class="d-block fs-5 mt-2">(Klik aku untuk mendengarkan informasi!)</span>
                        </p>
                    </div>
                </div>
                
                <!-- HALAMAN 6 (Bebek & Penutup) -->
                <div class="page">
                    <!-- Depan Halaman 6 (Bebek) -->
                    <div class="page-content flex-center-col gap-4" style="background-image: url('image/bg2.png'); background-size: cover; background-position: center;">
                        <h2 class="display-5 text-info-emphasis font-title">Kwek! Aku Bebek!</h2>
                        <div class="d-flex flex-column align-items: center justify-content-center position-relative my-4">
                            <i id="water-splash" class="fa-solid fa-burst display-1 text-primary position-absolute opacity-0 d-none"></i>
                            <img id="duck-btn" src="image/Bebek.png" alt="Bebek" class="w-auto cursor-pointer transition-transform hover-scale active-scale-95 shadow-lg md-h-150" style="height: 8rem;">
                        </div>
                        <p class="fs-4 text-info-dark text-center">
                            Aku jago sekali berenang di kolam! <strong class="fs-3 font-title">KWEK! KWEK!</strong>
                            <span class="d-block fs-5 mt-2">(Klik aku untuk mendengarkan informasi!)</span>
                        </p>
                    </div>
                    <!-- Belakang Halaman 6 (Penutup) -->
					<div class="page-content back-side flex-center-col text-center" style="background-image: url('image/bg2.png'); background-size: cover; background-position: center;">
						<h2 class="fs-2 md:fs-1 text-dark mb-4 font-title">Klik Gambar Hewan untuk mendengar suaranya!</h2>
						<div class="d-grid gap-4 gap-md-5" style="grid-template-columns: repeat(3, 1fr);">  
							<img src="image/Sapi.png" alt="Sapi" class="object-fit-contain cursor-pointer hover-scale-150 md-w-h-20" style="width: 4rem; height: 4rem;" onclick="playSound('moo')">
							<img src="image/Domba.png" alt="Domba" class="object-fit-contain cursor-pointer hover-scale-150 md-w-h-20" style="width: 4rem; height: 4rem;" onclick="playSound('baa')">
							<img src="image/Ayam.png" alt="Ayam" class="object-fit-contain cursor-pointer hover-scale-150 md-w-h-20" style="width: 4rem; height: 4rem;" onclick="playSound('cluck')">
							<img src="image/Kuda.png" alt="Kuda" class="object-fit-contain cursor-pointer hover-scale-150 md-w-h-20" style="width: 4rem; height: 4rem;" onclick="playSound('neigh')">
							<img src="image/Lebah.png" alt="Lebah" class="object-fit-contain cursor-pointer hover-scale-150 md-w-h-20" style="width: 4rem; height: 4rem;" onclick="playSound('buzz')">
							<img src="image/Bebek.png" alt="Bebek" class="object-fit-contain cursor-pointer hover-scale-150 md-w-h-20" style="width: 4rem; height: 4rem;" onclick="playSound('quack')">
						</div>
						<p class="text-primary fs-4 mt-5">Klik hewan untuk mendengar suaranya lagi!</p>
					</div>
                </div>

                <!-- HALAMAN 7 (Kuis Suara & Kuis Pasangkan) -->
                <div class="page">
                    <!-- Depan Halaman 7 (Kuis Suara) -->
                    <div class="page-content flex-center-col gap-4" style="background-image: url('image/bg2.png'); background-size: cover; background-position: center;">
                        <h2 class="fs-2 md:fs-1 text-purple-emphasis font-title">Kuis 1: Tebak Suara!</h2>

                        <button id="tutor-game-1" class="d-flex align-items: center gap-2 fs-5 fw-medium text-secondary-emphasis hover-text-primary text-decoration-none border-0 bg-transparent cursor-pointer">
                            <i class="fa-solid fa-volume-high fs-4 text-primary"></i>
                            <span>Cara Main</span>
                        </button>

                        <button id="play-quiz-sound-btn" class="quiz-btn">
                            <i class="fa-solid fa-volume-high"></i> Putar Suara
                        </button>
                        <div id="quiz-options-container" class="d-flex gap-3 gap-md-4 my-4">
                            <!-- Opsi kuis akan diisi oleh JavaScript (menggunakan gambar) -->
                        </div>
                        <p id="quiz-feedback" class="fs-3 font-title" style="height: 2rem;"></p>
                        <button id="next-quiz-btn" class="quiz-btn d-none">
                            Soal Berikutnya
                        </button>
                    </div>
                    
                    <!-- Belakang Halaman 7 (Kuis Puzzle Pasangkan) -->
                    <div class="page-content back-side flex-center-col gap-3" style="background-image: url('image/bg2.png'); background-size: cover; background-position: center;">
                        <h2 class="fs-2 md:fs-1 text-teal-emphasis font-title">Kuis 2: Pasangkan!</h2>

                        <button id="tutor-game-2" class="d-flex align-items: center gap-2 fs-5 fw-medium text-secondary-emphasis hover-text-primary text-decoration-none border-0 bg-transparent cursor-pointer mb-2">
                            <i class="fa-solid fa-volume-high fs-4 text-primary"></i>
                            <span>Cara Main</span>
                        </button>
                        
                        <p id="puzzle-feedback" class="fs-3 font-title" style="height: 2rem;"></p>
                        <div class="d-flex gap-4 gap-md-5 w-100 justify-content-center align-items-center">
                            <div id="puzzle-animals-container" class="d-flex flex-column gap-3">
                                <button class="puzzle-piece animal" data-match="sapi"><img src="image/Sapi.png" alt="Sapi"></button>
                                <button class="puzzle-piece animal" data-match="ayam"><img src="image/Ayam.png" alt="Ayam"></button>
                                <button class="puzzle-piece animal" data-match="kuda"><img src="image/Kuda.png" alt="Kuda"></button>
                            </div>
                            <div id="puzzle-shadows-container" class="d-flex flex-column gap-3">
                                <button class="puzzle-piece puzzle-shadow" data-match="kuda"><img src="image/Kuda.png" alt="Bayangan Kuda"></button>
                                <button class="puzzle-piece puzzle-shadow" data-match="sapi"><img src="image/Sapi.png" alt="Bayangan Sapi"></button>
                                <button class="puzzle-piece puzzle-shadow" data-match="ayam"><img src="image/Ayam.png" alt="Bayangan Ayam"></button>
                            </div>
                        </div>
                        <button id="reset-puzzle-btn" class="quiz-btn bg-teal-500 shadow-teal-700 d-none mt-4">
                            Ulangi Puzzle
                        </button>
                    </div>
                </div>

                <!-- HALAMAN 8 (Kuis Memori & Pustaka) -->
                <div class="page">
                    <!-- Depan Halaman 8 (Kuis Memori) -->
                    <div class="page-content flex-center-col gap-3" style="background-image: url('image/bg2.png'); background-size: cover; background-position: center;">
                        <h2 class="fs-2 md:fs-1 text-indigo-emphasis font-title">Kuis 3: Ingat Aku!</h2>

                        <button id="tutor-game-3" class="d-flex align-items: center gap-2 fs-5 fw-medium text-secondary-emphasis hover-text-primary text-decoration-none border-0 bg-transparent cursor-pointer mb-2">
                            <i class="fa-solid fa-volume-high fs-4 text-primary"></i>
                            <span>Cara Main</span>
                        </button>

                        <p id="memory-feedback" class="fs-3 font-title" style="height: 2rem;"></p>
                        
                        <div id="memory-grid" class="d-grid gap-3" style="grid-template-columns: repeat(4, 1fr);">
                        </div>

                        <button id="reset-memory-btn" class="quiz-btn bg-indigo-500 shadow-indigo-700 d-none mt-4">
                            Ulangi Kuis
                        </button>
                    </div>
                    <!-- Belakang Halaman 8 (Kuis 4) -->
                    <div class="page-content back-side flex-center-col" style="background-image: url('image/bg2.png'); background-size: cover; background-position: center;">

                        <h2 class="fs-2 md:fs-1 text-orange-emphasis font-title">Kuis 4: Susun Puzzle!</h2>
                        
                        <!-- BARU: Tombol Cara Main Kuis 4 -->
                        <button id="tutor-game-4" class="d-flex align-items: center gap-2 fs-5 fw-medium text-secondary-emphasis hover-text-primary text-decoration-none border-0 bg-transparent cursor-pointer mb-2">
                            <i class="fa-solid fa-volume-high fs-4 text-primary"></i>
                            <span>Cara Main</span>
                        </button>

                        <p id="puzzle-4-feedback" class="fs-3 font-title" style="height: 2rem;"></p>
                        
                        <!-- Kontainer untuk puzzle -->
                        <div id="puzzle-game-container">
                            <div id="puzzle-grid-target">
                            </div>
                            
                            <div id="puzzle-pieces-source">
                            </div>
                        </div>

                        <button id="reset-puzzle-4-btn" class="quiz-btn bg-orange-500 shadow-orange-700 d-none mt-4">
                            Ulangi Puzzle
                        </button>
                    </div>
                </div>

                <div class="page">
                    <!-- Depan Halaman 9 (Daftar Pustaka) -->
                    <div class="page-content flex-center-col gap-3" style="background-image: url('image/bg2.png'); background-size: cover; background-position: center;">

						<h2 class="fs-6 md:fs-6 text-primary-emphasis mb-5 font-title" style="max-width: 24rem;">Daftar Pustaka</h2>                        
							<ul class="fs-6 text-start fs-sm fs-md-6 space-y-3 ps-4" style="list-style-type: disc; list-style-position: outside;">
								<li>Nirmala, Ika. (2025). *Konsep Buku Cerita Interaktif PAUD*. Jakarta.</li>
								<li>Font Awesome. (2025). *Ikon Vektor*. Diakses dari https://fontawesome.com</li>
								<li>Bootstrap. (2025). *CSS Framework*. Diakses dari https://getbootstrap.com</li>
								<li>Google Fonts. (2025). *Fredoka Font Family*. Diakses dari https://fonts.google.com</li>
								<li>Sound Informasi.(2025). Text to Speech. daiskes dari https://elevenlabs.io/</li>
                                <li>
                                    Google Gemini. (2025). *Aset Gambar Digital (Sampul.png, bg2.png, Sapi.png, Domba.png, Ayam.png, Kuda.png, Lebah.png, Bebek.png)*. Generate dari https://gemini.ai
                                </li>
                                <li>
                                    Pixabay. (2025). *Efek Suara dan Musik Latar (Balik.mp3, Wrong.mp3, Klik.mp3, bgmusic.mp3)*. Diakses dari https://pixabay.com/sound-effects/
                                </li>
							</ul>

                    </div>
                    
                    <!-- Belakang Halaman 9 (Penulis) -->
                    <div class="page-content back-side flex-center-col penulis-bg">
                        <h2 class="fs-2 md:fs-1 text-primary-emphasis mb-5 font-title">Penulis</h2>

                        <img src="image/IkaNirmala.jpg" alt="Ika Nirmala" class="object-fit-contain mb-5 img-md-larger" style="border-radius: 50%; width: 8rem; height: 8rem;">
                        
                        <h3 class="fs-3 fw-medium text-blue-emphasis">Ika Nirmala, M.Pd</h3>
                        <p class="text-primary-emphasis fs-4 mt-4" style="max-width: 24rem;">
                            Penulis adalah seorang pendidik yang berdedikasi untuk menciptakan media pembelajaran yang interaktif dan menyenangkan bagi anak-anak Indonesia.
                        </p>
                    </div>
                </div>

                <div class="page">
                    <!-- Depan Halaman 10 (Hak Cipta) -->
					<div class="page-content flex-center-col text-center text-secondary bg-gradient-bangbin1">
                        <a href="https://www.kemdikbud.go.id" target="_blank" class="hover-scale" title="Kunjungi Website Kemdikbud">
                            <img src="image/favicon.ico" alt="Logo Kemdikbud" class="object-fit-contain mb-4 img-md-larger" style="width: 8rem; height: 8rem;">
                        </a>
                        
                        <p class="fw-medium text-dark-emphasis fs-5">Hak Cipta Milik Direktorat Pendidikan Anak Usia Dini</p>
                        <p class="fs-6">
                            Direktorat Jendral Pendidikan Anak Usia Dini, Pendidikan Dasar, Pendidikan Menengah.
                        </p>
                        <p class="fs-6">Kementrian Pendidikan Dasar dan Menengah</p>
                        <p class="fw-medium mt-1">Tahun 2025</p>
                        
                        <div class="d-flex flex-column flex-md-row align-items-center justify-content-center gap-4 gap-md-5 mt-5">
                            <img src="image/logo-bermutu.png" alt="Logo Bermutu" class="w-auto object-fit-contain" style="height: 2.5rem;" title="Bermutu">
                            <img src="image/logo-paudpedia.png" alt="Logo Paudpedia" class="w-auto object-fit-contain" style="height: 2.5rem;" title="Paudpedia">
                            <img src="image/logo-ramah.png" alt="Logo Ramah Anak" class="w-auto object-fit-contain" style="height: 2.5rem;" title="Ramah Anak">
                        </div>
                    </div>
                    <!-- Sampul Belakang -->
                    <div class="page-content back-side cover flex-center-col text-white" style="background-image: url('image/bg2.png'); background-size: cover; background-position: center;">
                         <h1 class="text-black display-5 fw-bold font-title">SELESAI!</h1>
						 <img src="image/favicon.ico" alt="Logo Kemdikbud" class="object-fit-contain mb-4 img-md-larger" style="width: 8rem; height: 8rem;">
                         <h2 class="text-black fs-3">Kamu Pintar!</h2>
                    </div>
                </div>

            </div>
        </div>
        
        <!-- Navigation Buttons -->
        <div class="navigation-buttons">
            <button id="prev-btn" class="nav-button">
                <i class="fas fa-chevron-left"></i>
            </button>
            <!-- PERUBAHAN: Menghapus inline style 'style' dari tombol mute -->
            <button id="mute-btn" class="nav-button bg-orange-500 shadow-orange-700">
                <i class="fas fa-volume-high"></i>
            </button>
            <button id="next-btn" class="nav-button">
                <i class="fas fa-chevron-right"></i>
            </button>
        </div>
    </div>


    <audio id="sound-sapi" src="sound/Sapi.mp3" preload="auto"></audio>
    <audio id="sound-domba" src="sound/Domba.mp3" preload="auto"></audio>
    <audio id="sound-ayam" src="sound/Ayam.mp3" preload="auto"></audio>
    <audio id="sound-kuda" src="sound/Kuda.mp3" preload="auto"></audio>
    <audio id="sound-lebah" src="sound/Lebah.mp3" preload="auto"></audio>
    <audio id="sound-bebek" src="sound/Bebek.mp3" preload="auto"></audio>

    <audio id="info-sapi" src="sound/Bangbin-Sapi.mp3" preload="auto"></audio>
    <audio id="info-domba" src="sound/Bangbin-Domba.mp3" preload="auto"></audio>
    <audio id="info-ayam" src="sound/Bangbin-Ayam.mp3" preload="auto"></audio>
    <audio id="info-kuda" src="sound/Bangbin-Kuda.mp3" preload="auto"></audio>
    <audio id="info-lebah" src="sound/Bangbin-Lebah.mp3" preload="auto"></audio>
    <audio id="info-bebek" src="sound/Bangbin-Bebek.mp3" preload="auto"></audio>

    <audio id="sound-petunjuk1" src="sound/Petunjuk1.mp3" preload="auto"></audio>
    <audio id="sound-petunjuk2" src="sound/Petunjuk2.mp3" preload="auto"></audio>
    <audio id="sound-petunjuk3" src="sound/Petunjuk3.mp3" preload="auto"></audio>
    <audio id="sound-petunjuk4" src="sound/Petunjuk4.mp3" preload="auto"></audio>

    <audio id="sound-tutor1" src="sound/TutorGame1.mp3" preload="auto"></audio>
    <audio id="sound-tutor2" src="sound/TutorGame2.mp3" preload="auto"></audio>
    <audio id="sound-tutor3" src="sound/TutorGame3.mp3" preload="auto"></audio>
    <audio id="sound-tutor4" src="sound/TutorGame4.mp3" preload="auto"></audio>
    
    <audio id="sound-click" src="sound/Klik.mp3" preload="auto"></audio>
    <audio id="sound-wrong" src="sound/Wrong.mp3" preload="auto"></audio>
    <audio id="sound-flip" src="sound/Balik.mp3" preload="auto"></audio>
    <audio id="sound-bgm" src="sound/bgmusic.mp3" preload="auto" loop></audio>
    <audio id="sound-menang" src="sound/Menang.mp3" preload="auto"></audio>


    <script>
        const soundMap = {
            'moo': document.getElementById('sound-sapi'),
            'baa': document.getElementById('sound-domba'),
            'cluck': document.getElementById('sound-ayam'),
            'neigh': document.getElementById('sound-kuda'),
            'buzz': document.getElementById('sound-lebah'),
            'quack': document.getElementById('sound-bebek')
        };
        

        const infoSoundMap = {
            'sapi': document.getElementById('info-sapi'),
            'domba': document.getElementById('info-domba'),
            'ayam': document.getElementById('info-ayam'),
            'kuda': document.getElementById('info-kuda'),
            'lebah': document.getElementById('info-lebah'),
            'bebek': document.getElementById('info-bebek')
        };
        
        const petunjukSoundMap = {
            'petunjuk1': document.getElementById('sound-petunjuk1'),
            'petunjuk2': document.getElementById('sound-petunjuk2'),
            'petunjuk3': document.getElementById('sound-petunjuk3'),
            'petunjuk4': document.getElementById('sound-petunjuk4')
        };

        const tutorSoundMap = {
            'tutor1': document.getElementById('sound-tutor1'),
            'tutor2': document.getElementById('sound-tutor2'),
            'tutor3': document.getElementById('sound-tutor3'),
            'tutor4': document.getElementById('sound-tutor4')
        };
        
        const animalImageMap = {
            'sapi': 'image/Sapi.png',
            'domba': 'image/Domba.png',
            'ayam': 'image/Ayam.png',
            'kuda': 'image/Kuda.png',
            'lebah': 'image/Lebah.png',
            'bebek': 'image/Bebek.png'
        };
        
        const soundQuizMap = {
             'moo': 'sapi',
             'baa': 'domba',
             'cluck': 'ayam',
             'neigh': 'kuda',
             'buzz': 'lebah',
             'quack': 'bebek'
        };

        let soundClick, soundWrong, soundFlip, soundBgm, soundMenang; 


        function stopAllSounds(except = null) {
            const allSounds = [
                ...Object.values(soundMap),
                ...Object.values(infoSoundMap),
                ...Object.values(petunjukSoundMap),
                ...Object.values(tutorSoundMap),
                soundClick, soundWrong, soundFlip, soundMenang 
            ];
            
            allSounds.forEach(sound => {
                if (sound && sound !== except) {
                    sound.pause();
                    sound.currentTime = 0;
                }
            });
        }

        function playSound(animalKey) { 
            stopAllSounds();
            
            let audio;
            if (soundMap[animalKey]) {
                audio = soundMap[animalKey]; 
            } else {

                const soundKey = Object.keys(soundQuizMap).find(key => soundQuizMap[key] === animalKey);
                if(soundKey && soundMap[soundKey]) {
                    audio = soundMap[soundKey]; 
                }
            }

            if (audio) {
                audio.play().catch(e => {
                    if (e.name !== 'NotAllowedError') {
                         console.error("Gagal memutar audio:", e);
                    }
                });
            }
        }
        
        function playInfoSound(animal) { 
            stopAllSounds();
            
           const infoSoundKeyMap = {
                'sapi': document.getElementById('info-sapi'),
                'domba': document.getElementById('info-domba'),
                'ayam': document.getElementById('info-ayam'),
                'kuda': document.getElementById('info-kuda'),
                'lebah': document.getElementById('info-lebah'),
                'bebek': document.getElementById('info-bebek')
            };

            const audio = infoSoundKeyMap[animal];
            if (audio) {
                audio.play().catch(e => {
                    if (e.name !== 'NotAllowedError') {
                         console.error("Gagal memutar audio info:", e);
                    }
                });
            }
        }
        
        function playPetunjukSound(soundKey) {
            stopAllSounds();
            
            const audio = petunjukSoundMap[soundKey];
            if (audio) {
                audio.play().catch(e => {
                    if (e.name !== 'NotAllowedError') {
                         console.error("Gagal memutar audio petunjuk:", e);
                    }
                });
            }
        }

        function playTutorSound(soundKey) {
            stopAllSounds();
            
            const audio = tutorSoundMap[soundKey];
            if (audio) {
                audio.play().catch(e => {
                    if (e.name !== 'NotAllowedError') {
                            console.error("Gagal memutar audio tutorial:", e);
                    }
                });
            }
        }

        function playClickSound() {
            if (soundClick) {
                soundClick.currentTime = 0;
                soundClick.play().catch(e => {});
            }
        }
        
        function playWrongSound() {
            if (soundWrong) {
                soundWrong.currentTime = 0;
                soundWrong.play().catch(e => {});
            }
        }

        function playFlipSound() {
            if (soundFlip) {
                soundFlip.currentTime = 0;
                soundFlip.play().catch(e => {});
            }
        }

        function playWinSound() {
            if (soundMenang) {
                stopAllSounds(); 
                soundMenang.currentTime = 0;
                soundMenang.play().catch(e => {});
            }
        }


        // --- EVENT LISTENER UTAMA ---
        document.addEventListener('DOMContentLoaded', () => {
            
            soundClick = document.getElementById('sound-click');
            soundWrong = document.getElementById('sound-wrong');
            soundFlip = document.getElementById('sound-flip');
            soundBgm = document.getElementById('sound-bgm');
            soundMenang = document.getElementById('sound-menang'); 
            
            const muteBtn = document.getElementById('mute-btn');
            const muteIcon = muteBtn.querySelector('i');
            let isMuted = false;
            
            if (soundBgm) {
                soundBgm.volume = 0.3; 
            }


            muteBtn.addEventListener('click', () => {
                isMuted = !isMuted;
                
                if (soundBgm) {
                    soundBgm.muted = isMuted;
                }

                if (isMuted) {
                    muteIcon.classList.remove('fa-volume-high');
                    muteIcon.classList.add('fa-volume-mute');
                    if (soundBgm) soundBgm.pause(); 
                } else {
                    muteIcon.classList.remove('fa-volume-mute');
                    muteIcon.classList.add('fa-volume-high');
                    if (soundBgm) {
                         soundBgm.play().catch(e => console.log("BGM play failed, user interaction needed."));
                    }
                }
            });


            function startAudioContext() {
                if (!isMuted && soundBgm) {
                    soundBgm.play().catch(e => console.log("BGM auto-play failed, waiting for interaction."));
                }
                document.body.removeEventListener('click', startAudioContext);
                document.body.removeEventListener('touchend', startAudioContext);
            }
            document.body.addEventListener('click', startAudioContext);
            document.body.addEventListener('touchend', startAudioContext);


            // --- Logika Membalik Buku ---
            const pages = document.querySelectorAll('.page');
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');

            let currentPage = 0;
            let isFlipping = false;
            const totalPages = pages.length;

            function updatePageZIndexes() {
                pages.forEach((page, index) => {
                    if (index < currentPage) {
                        page.style.zIndex = index + 1;
                    } else {
                        page.style.zIndex = totalPages - index;
                    }
                });
            }

            function flipPage(direction) {
                if (isFlipping) return;
                
                stopAllSounds(); 
                playFlipSound();

                if (direction === 'next') {
                    if (currentPage >= totalPages) return; 

                    isFlipping = true;
                    const pageToFlip = pages[currentPage];
                    pageToFlip.style.zIndex = totalPages + 1;
                    pageToFlip.classList.add('flipped');
                    currentPage++;

                } else if (direction === 'prev') {
                    if (currentPage <= 0) return; 

                    isFlipping = true;
                    currentPage--;
                    const pageToFlip = pages[currentPage];
                    pageToFlip.style.zIndex = totalPages + 1;
                    pageToFlip.classList.remove('flipped');
                }

                setTimeout(() => {
                    isFlipping = false;
                    updatePageZIndexes();
                }, 800); 
            }

            function goToPage(targetIndex) {
                if (isFlipping) return;               
                if (targetIndex === currentPage) {
                    return; 
                }
                
                stopAllSounds();               
                playClickSound(); 

                if (targetIndex === currentPage + 1) {
                    flipPage('next');
                } else if (targetIndex === currentPage - 1) {
                    flipPage('prev');
                } else {
                    isFlipping = true;
                    
                    pages.forEach((page, index) => {
                        if (index < targetIndex) {
                            page.classList.add('flipped');
                        } else {
                            page.classList.remove('flipped');
                        }
                    });

                    currentPage = targetIndex;

                    setTimeout(() => {
                        isFlipping = false;
                        updatePageZIndexes();
                    }, 300); 
                }
            }


            prevBtn.addEventListener('click', () => {
                playClickSound(); 
                flipPage('prev');
            });
            nextBtn.addEventListener('click', () => {
                playClickSound(); 
                flipPage('next');
            });

            pages.forEach((page, index) => {
                page.addEventListener('click', (e) => {
                    if (e.target.closest('button') || e.target.closest('img[id$="-btn"]') || e.target.closest('img[onclick]') || e.target.closest('a') || e.target.closest('[draggable="true"]') || e.target.closest('.memory-card') || e.target.closest('.puzzle-piece-drag') || e.target.closest('.petunjuk-item') || e.target.closest('[id^="tutor-game-"]') || e.target.closest('.daftar-isi-item')) {
                        return;
                    }
                    
                    const isFlippedPage = page.classList.contains('flipped');
                    if (isFlippedPage && index === currentPage - 1) {
                         flipPage('prev');
                    } else if (!isFlippedPage && index === currentPage) {
                        flipPage('next');
                    }
                });
            });

            updatePageZIndexes();

            document.querySelectorAll('.daftar-isi-item').forEach(item => {
                item.addEventListener('click', (e) => {
                    const targetPageStr = e.currentTarget.dataset.targetPage;
                    if (targetPageStr) {
                        const targetIndex = parseInt(targetPageStr, 10);
                        goToPage(targetIndex);
                    }
                });
            });


            // BARU: Event listener untuk item petunjuk
            document.querySelectorAll('.petunjuk-item').forEach(item => {
                item.addEventListener('click', () => {
                    playClickSound(); 
                    const soundKey = item.dataset.sound;
                    if (soundKey) {
                        playPetunjukSound(soundKey);
                    }
                });
            });

            // Halaman Sapi
            document.getElementById('cow-btn').addEventListener('click', () => {
                playClickSound(); 
                playInfoSound('sapi'); 
                const milkDiv = document.getElementById('milk-interaction');
                const milkFill = document.getElementById('milk-fill');
                
                milkDiv.classList.remove('d-none');
                milkFill.classList.remove('milk-fill-anim'); 
                void milkFill.offsetWidth; 
                milkFill.classList.add('milk-fill-anim'); 
            });

            // Halaman Domba
            document.getElementById('sheep-btn').addEventListener('click', () => {
                playClickSound(); 
                playInfoSound('domba'); 
                const woolIcon = document.getElementById('wool-interaction');
                woolIcon.classList.remove('d-none');
                woolIcon.style.opacity = '1';
                woolIcon.style.transform = 'translateY(-20px) rotate(-15deg)';
                
                setTimeout(() => { 
                    woolIcon.style.opacity = '0';
                    woolIcon.style.transform = 'translateY(0) rotate(0deg)';
                    setTimeout(() => woolIcon.classList.add('d-none'), 500);
                }, 1500);
            });

            // --- LOGIKA DRAG N DROP TELUR ---
            const draggableEggs = document.querySelectorAll('.egg-draggable');
            const eggBasket = document.getElementById('egg-basket');
            const eggNest = document.getElementById('egg-nest');
            const eggFeedback = document.getElementById('egg-feedback');
            let eggsInBasket = 0;
            const totalEggs = 3; 

            function resetEggGame() {
                if (!eggBasket || !eggNest) return; 
                
                eggBasket.innerHTML = ''; 
                if(eggFeedback) eggFeedback.textContent = '';
                eggsInBasket = 0;

                const eggIds = ['egg1', 'egg2', 'egg3']; 
                
                eggIds.forEach(id => {
                    const egg = document.getElementById(id);
                    if (egg) { 
                        egg.draggable = true;
                        egg.classList.remove('placed', 'dragging');
                        if (egg.parentElement !== eggNest) {
                            eggNest.appendChild(egg);
                        }
                    }
                });
            }

            draggableEggs.forEach(egg => {
                egg.addEventListener('dragstart', (e) => {
                    playSound('cluck'); 
                    e.dataTransfer.setData('text/plain', e.target.id);
                    egg.classList.add('dragging');
                    if (eggFeedback) eggFeedback.textContent = '';
                });

                egg.addEventListener('dragend', () => {
                    egg.classList.remove('dragging');
                });
            });

            if (eggBasket) {
                eggBasket.addEventListener('dragover', (e) => {
                    e.preventDefault(); 
                    eggBasket.classList.add('drag-over');
                });

                eggBasket.addEventListener('dragleave', () => {
                    eggBasket.classList.remove('drag-over');
                });

                eggBasket.addEventListener('drop', (e) => {
                    e.preventDefault();
                    eggBasket.classList.remove('drag-over');
                    
                    const id = e.dataTransfer.getData('text/plain');
                    const draggableElement = document.getElementById(id);

                    if (draggableElement && !draggableElement.classList.contains('placed')) {
                        playClickSound(); 
                        eggBasket.appendChild(draggableElement);
                        draggableElement.draggable = false;
                        draggableElement.classList.add('placed');
                        eggsInBasket++;

                        if (eggsInBasket === totalEggs) {
                            if (eggFeedback) eggFeedback.textContent = "Hebat! Semua telur aman!";
                            setTimeout(resetEggGame, 3000); 
                        }
                    }
                });
            }
            
            // Halaman Kuda
            document.getElementById('horse-btn').addEventListener('click', (e) => {
                playClickSound(); 
                playInfoSound('kuda'); 
                const horse = e.currentTarget;
                horse.classList.add('horse-run-anim');
                setTimeout(() => horse.classList.remove('horse-run-anim'), 1000);
            });
            
            // Halaman Lebah
            document.getElementById('bee-btn').addEventListener('click', (e) => {
                playClickSound(); 
                playInfoSound('lebah'); 
                const bee = e.currentTarget;
                bee.classList.add('bee-fly-anim');
                setTimeout(() => bee.classList.remove('bee-fly-anim'), 500);
            });

            // Halaman Bebek
            document.getElementById('duck-btn').addEventListener('click', () => {
                playClickSound(); 
                playInfoSound('bebek'); 
                const splash = document.getElementById('water-splash');
                splash.classList.remove('d-none');
                splash.classList.add('bee-fly-anim'); 
                setTimeout(() => {
                    splash.classList.add('d-none');
                    splash.classList.remove('bee-fly-anim');
                }, 500);
            });

            // --- BARU: Event Listener Tombol Tutorial Kuis ---
            document.getElementById('tutor-game-1')?.addEventListener('click', () => {
                playClickSound(); 
                playTutorSound('tutor1');
            });
            document.getElementById('tutor-game-2')?.addEventListener('click', () => {
                playClickSound(); 
                playTutorSound('tutor2');
            });
            document.getElementById('tutor-game-3')?.addEventListener('click', () => {
                playClickSound(); 
                playTutorSound('tutor3');
            });
            document.getElementById('tutor-game-4')?.addEventListener('click', () => {
                playClickSound(); 
                playTutorSound('tutor4');
            });

            // --- LOGIKA KUIS ---

            // --- KUIS 1: TEBAK SUARA ---
            const soundQuizQuestions = [
                { sound: 'moo', options: ['sapi', 'domba', 'ayam'], answer: 'sapi' },
                { sound: 'cluck', options: ['kuda', 'ayam', 'bebek'], answer: 'ayam' },
                { sound: 'neigh', options: ['lebah', 'kuda', 'sapi'], answer: 'kuda' },
                { sound: 'buzz', options: ['domba', 'bebek', 'lebah'], answer: 'lebah' }
            ];
            let currentSoundQuestion = 0;
            let soundQuizInProgress = true;

            const playQuizSoundBtn = document.getElementById('play-quiz-sound-btn');
            const quizOptionsContainer = document.getElementById('quiz-options-container');
            const quizFeedback = document.getElementById('quiz-feedback');
            const nextQuizBtn = document.getElementById('next-quiz-btn');

            function loadSoundQuestion(index) {
                if (!quizFeedback) return; 

                if (index >= soundQuizQuestions.length) {
                    quizFeedback.textContent = "Permainan Selesai, Kamu Hebat!";
                    quizFeedback.className = "fs-3 font-title text-success";
                    playQuizSoundBtn.classList.add('d-none');
                    quizOptionsContainer.classList.add('d-none');
                    nextQuizBtn.textContent = "Ulangi Kuis Suara";
                    nextQuizBtn.classList.remove('d-none');
                    soundQuizInProgress = false;
                    playWinSound(); 
                    return;
                }

                soundQuizInProgress = true;
                const question = soundQuizQuestions[index];
                
                playQuizSoundBtn.classList.remove('d-none');
                quizOptionsContainer.classList.remove('d-none');
                quizFeedback.textContent = "";
                nextQuizBtn.classList.add('d-none');
                nextQuizBtn.textContent = "Soal Berikutnya";

                playQuizSoundBtn.onclick = () => {
                    playClickSound(); 
                    playSound(question.sound);
                };
                
                quizOptionsContainer.innerHTML = '';
                question.options.forEach((animal, i) => {
                    const optionBtn = document.createElement('button');
                    optionBtn.className = 'quiz-option';
                    optionBtn.dataset.animal = animal;
                    
                    const imgPath = animalImageMap[animal];
                    optionBtn.innerHTML = `<img src="${imgPath}" alt="${animal}">`;
                    
                    optionBtn.onclick = () => {
                        playClickSound(); 
                        checkSoundAnswer(animal, question.answer, optionBtn);
                    };
                    quizOptionsContainer.appendChild(optionBtn);
                });
            }

            function checkSoundAnswer(selected, correct, btn) {
                if (!soundQuizInProgress) return;
                soundQuizInProgress = false; 

                const allOptions = quizOptionsContainer.querySelectorAll('.quiz-option');
                allOptions.forEach(opt => {
                    opt.disabled = true; 
                    if (opt.dataset.animal === correct) {
                        opt.classList.add('correct');
                    }
                });

                if (selected === correct) {
                    quizFeedback.textContent = "Benar!";
                    quizFeedback.className = "fs-3 font-title text-success";
                } else {
                    playWrongSound(); 
                    quizFeedback.textContent = "Coba Lagi Nanti!";
                    quizFeedback.className = "fs-3 font-title text-danger";
                    btn.classList.add('wrong');
                }
                nextQuizBtn.classList.remove('d-none');
            }

            if(nextQuizBtn) {
                nextQuizBtn.addEventListener('click', () => {
                    playClickSound(); // BARU
                    if (nextQuizBtn.textContent === "Ulangi Kuis Suara") {
                        currentSoundQuestion = 0;
                    } else {
                        currentSoundQuestion++;
                    }
                    loadSoundQuestion(currentSoundQuestion);
                });
            }
            
            // --- KUIS 2: PUZZLE PASANGKAN ---
            const animalsContainer = document.getElementById('puzzle-animals-container');
            const shadowsContainer = document.getElementById('puzzle-shadows-container');
            const puzzleFeedback = document.getElementById('puzzle-feedback');
            const resetPuzzleBtn = document.getElementById('reset-puzzle-btn');
            
            // Corrected data-match values if they were wrong before
            if (animalsContainer && shadowsContainer) {
                 animalsContainer.querySelector('[data-match="cow"]')?.setAttribute('data-match', 'sapi');
                 animalsContainer.querySelector('[data-match="chicken"]')?.setAttribute('data-match', 'ayam');
                 animalsContainer.querySelector('[data-match="horse"]')?.setAttribute('data-match', 'kuda');
                 shadowsContainer.querySelector('[data-match="cow"]')?.setAttribute('data-match', 'sapi');
                 shadowsContainer.querySelector('[data-match="chicken"]')?.setAttribute('data-match', 'ayam');
                 shadowsContainer.querySelector('[data-match="horse"]')?.setAttribute('data-match', 'kuda');
            }
            
            let selectedAnimal = null;
            let matchedPairs = 0;
            const totalPairs = 3;

            function initPuzzle() {
                if (!shadowsContainer || !animalsContainer) return; 

                const shadows = Array.from(shadowsContainer.children);
                shadows.sort(() => Math.random() - 0.5);
                shadows.forEach(shadow => shadowsContainer.appendChild(shadow));

                matchedPairs = 0;
                selectedAnimal = null;
                if(puzzleFeedback) puzzleFeedback.textContent = "";
                if(resetPuzzleBtn) resetPuzzleBtn.classList.add('d-none');

                document.querySelectorAll('#puzzle-animals-container .puzzle-piece, #puzzle-shadows-container .puzzle-piece').forEach(p => {
                    p.classList.remove('selected', 'matched');
                    p.disabled = false;
                });
            }

            if (animalsContainer) {
                animalsContainer.addEventListener('click', (e) => {
                    const animalBtn = e.target.closest('.puzzle-piece.animal');
                    if (!animalBtn || animalBtn.classList.contains('matched')) return;
                    
                    playClickSound(); 

                    if (animalBtn === selectedAnimal) {
                        animalBtn.classList.remove('selected');
                        selectedAnimal = null;
                        return;
                    }

                    if (selectedAnimal) {
                        selectedAnimal.classList.remove('selected');
                    }

                    selectedAnimal = animalBtn;
                    selectedAnimal.classList.add('selected');
                    if(puzzleFeedback) puzzleFeedback.textContent = "";
                });
            }

            if (shadowsContainer) {
                shadowsContainer.addEventListener('click', (e) => {
                    const shadowBtn = e.target.closest('.puzzle-piece.puzzle-shadow');
                    if (!shadowBtn || shadowBtn.classList.contains('matched') || !selectedAnimal) return;
                    
                    playClickSound(); 

                    if (shadowBtn.dataset.match === selectedAnimal.dataset.match) {
                        shadowBtn.classList.add('matched');
                        selectedAnimal.classList.add('matched');
                        shadowBtn.disabled = true;
                        selectedAnimal.disabled = true;
                        selectedAnimal = null;
                        matchedPairs++;
                        if(puzzleFeedback) puzzleFeedback.textContent = "Cocok!";
                        if(puzzleFeedback) puzzleFeedback.className = "fs-3 font-title text-success";
                    } else {
                        playWrongSound(); 
                        if(puzzleFeedback) puzzleFeedback.textContent = "Bukan!";
                        if(puzzleFeedback) puzzleFeedback.className = "fs-3 font-title text-danger";
                        if(selectedAnimal) selectedAnimal.classList.remove('selected');
                        selectedAnimal = null;
                    }

                    if (matchedPairs === totalPairs) {
                        if(puzzleFeedback) puzzleFeedback.textContent = "Hebat, Selesai!";
                        if(resetPuzzleBtn) resetPuzzleBtn.classList.remove('d-none');
                        playWinSound(); 
                    }
                });
            }
            
            if (resetPuzzleBtn) {
                resetPuzzleBtn.addEventListener('click', () => {
                    playClickSound(); 
                    initPuzzle();
                });
            }

            // --- KUIS 3: PUZZLE MEMORI ---
            const memoryGrid = document.getElementById('memory-grid');
            const memoryFeedback = document.getElementById('memory-feedback');
            const resetMemoryBtn = document.getElementById('reset-memory-btn');

            const memoryAnimals = Object.keys(animalImageMap); 
            let flippedCards = [];
            let matchedMemoryPairs = 0;
            let lockBoard = false;

            function createMemoryBoard() {
                if (!memoryGrid) return; 

                matchedMemoryPairs = 0;
                lockBoard = false;
                flippedCards = [];
                if (memoryFeedback) memoryFeedback.textContent = '';
                if (resetMemoryBtn) resetMemoryBtn.classList.add('d-none');
                memoryGrid.innerHTML = '';

                // Select 6 unique animals for the 12 cards (6 pairs)
                 const selectedAnimals = memoryAnimals.sort(() => 0.5 - Math.random()).slice(0, 6);
                const cardData = [...selectedAnimals, ...selectedAnimals];
                cardData.sort(() => Math.random() - 0.5);

                cardData.forEach(animalName => {
                    const card = document.createElement('div');
                    card.className = 'memory-card';
                    card.dataset.animal = animalName;

                    const imgPath = animalImageMap[animalName];
                    
                    card.innerHTML = `
                        <div class="card-face card-front"><img src="${imgPath}" alt="${animalName}"></div>
                        <div class="card-face card-back"><i class="fa-solid fa-question"></i></div>
                    `;
                    
                    card.addEventListener('click', flipCard);
                    memoryGrid.appendChild(card);
                });
            }

            function flipCard() {
                if (lockBoard) return;
                if (this === flippedCards[0]) return; 
                if (this.classList.contains('matched')) return; 
                
                playClickSound(); 

                this.classList.add('flipped');
                flippedCards.push(this);

                if (flippedCards.length === 2) {
                    lockBoard = true;
                    checkForMatch();
                }
            }

            function checkForMatch() {
                const [card1, card2] = flippedCards;
                const isMatch = card1.dataset.animal === card2.dataset.animal;

                if (isMatch) {
                    disableCards(card1, card2);
                } else {
                    unflipCards(card1, card2);
                }
            }

			function disableCards(card1, card2) {
                const icon1 = card1.querySelector('.card-back i');
                const icon2 = card2.querySelector('.card-back i');
                
                if (icon1) {
                    icon1.classList.remove('fa-question');
                    icon1.classList.add('fa-check');
                }
                if (icon2) {
                    icon2.classList.remove('fa-question');
                    icon2.classList.add('fa-check');
                }

                card1.classList.remove('flipped');
                card2.classList.remove('flipped');
                card1.classList.add('matched');
                card2.classList.add('matched');
                
                matchedMemoryPairs++;
                flippedCards = [];
                lockBoard = false;

                if (matchedMemoryPairs === 6) { // Check against 6 pairs now
                    if (memoryFeedback) memoryFeedback.textContent = 'Hebat, Selesai!';
                    if (resetMemoryBtn) resetMemoryBtn.classList.remove('d-none');
                    playWinSound(); 
                }
            }

            function unflipCards(card1, card2) {
                playWrongSound(); 
                setTimeout(() => {
                    card1.classList.remove('flipped');
                    card2.classList.remove('flipped');
                    flippedCards = [];
                    lockBoard = false;
                }, 1000); 
            }

            if (resetMemoryBtn) {
                resetMemoryBtn.addEventListener('click', () => {
                    playClickSound(); 
                    createMemoryBoard();
                });
            }
            
            
            // --- BARU: KUIS 4 (PUZZLE SUSUN) ---
            const puzzleGridTarget = document.getElementById('puzzle-grid-target');
            const puzzlePiecesSource = document.getElementById('puzzle-pieces-source');
            const puzzle4Feedback = document.getElementById('puzzle-4-feedback');
            const resetPuzzle4Btn = document.getElementById('reset-puzzle-4-btn');
            
            const puzzle4Animals = ['sapi', 'ayam', 'lebah', 'domba', 'kuda', 'bebek']; // More animals
            const piecePositions = ['0% 0%', '100% 0%', '0% 100%', '100% 100%']; // [0, 1, 2, 3]
            let draggedPuzzlePiece = null;
            let correctPieces = 0;

            function initGame4Puzzle() {
                if (!puzzleGridTarget || !puzzlePiecesSource) return;

                correctPieces = 0;
                puzzleGridTarget.innerHTML = '';
                puzzlePiecesSource.innerHTML = '';
                if (puzzle4Feedback) puzzle4Feedback.textContent = '';
                if (resetPuzzle4Btn) resetPuzzle4Btn.classList.add('d-none');

                const randomAnimal = puzzle4Animals[Math.floor(Math.random() * puzzle4Animals.length)];
                const imgUrl = animalImageMap[randomAnimal];
                
                let pieces = [];
                for (let i = 0; i < 4; i++) {
                    // Buat Drop Zone
                    const dropZone = document.createElement('div');
                    dropZone.className = 'puzzle-drop-zone';
                    dropZone.dataset.pos = i;
                    puzzleGridTarget.appendChild(dropZone);
                    
                    // Buat Draggable Piece
                    const piece = document.createElement('div');
                    piece.className = 'puzzle-piece-drag';
                    piece.draggable = true;
                    piece.dataset.pos = i;
                    piece.style.backgroundImage = `url(${imgUrl})`;
                    piece.style.backgroundPosition = piecePositions[i];
                    
                    pieces.push(piece);
                }
                
                pieces.sort(() => Math.random() - 0.5);
                pieces.forEach(piece => {
                    puzzlePiecesSource.appendChild(piece);
                    addDragListenersToPiece(piece);
                });
                
                document.querySelectorAll('.puzzle-drop-zone').forEach(zone => {
                     addDropListenersToZone(zone);
                });
            }
            
            function addDragListenersToPiece(piece) {
                piece.addEventListener('dragstart', (e) => {
                    // playClickSound(); 
                    draggedPuzzlePiece = piece;
                    e.dataTransfer.setData('text/plain', piece.dataset.pos);
                    setTimeout(() => piece.classList.add('dragging'), 0);
                    if (puzzle4Feedback) puzzle4Feedback.textContent = '';
                });
                
                piece.addEventListener('dragend', () => {
                    if (draggedPuzzlePiece) { 
                        draggedPuzzlePiece.classList.remove('dragging');
                    }
                    draggedPuzzlePiece = null;
                });
            }
            
            function addDropListenersToZone(zone) {
                 zone.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    if (!zone.hasChildNodes()) { 
                        zone.classList.add('drag-over');
                    }
                });
                
                zone.addEventListener('dragleave', () => {
                    zone.classList.remove('drag-over');
                });
                
                zone.addEventListener('drop', (e) => {
                    e.preventDefault();
                    zone.classList.remove('drag-over');
                    
                    if (zone.hasChildNodes() || !draggedPuzzlePiece) return; 
                    
                    const droppedPos = draggedPuzzlePiece.dataset.pos;
                    const targetPos = zone.dataset.pos;
                    
                    if (droppedPos === targetPos) {
                        // BENAR
                        playClickSound(); 
                        zone.appendChild(draggedPuzzlePiece);
                        draggedPuzzlePiece.draggable = false;
                        draggedPuzzlePiece.classList.add('placed');
                        draggedPuzzlePiece.classList.remove('dragging');
                        zone.style.border = 'none'; 
                        
                        correctPieces++;
                        if (puzzle4Feedback) {
                            puzzle4Feedback.textContent = "Benar!";
                            puzzle4Feedback.className = "fs-3 font-title text-success";
                        }
                        
                        if (correctPieces === 4) {
                            if (puzzle4Feedback) puzzle4Feedback.textContent = "Hebat, Selesai!";
                            if (resetPuzzle4Btn) resetPuzzle4Btn.classList.remove('d-none');
                            playWinSound(); // Mainkan suara menang
                        }
                        
                    } else {
                        // SALAH
                         playWrongSound(); 
                         if (puzzle4Feedback) {
                            puzzle4Feedback.textContent = "Bukan disitu!";
                             puzzle4Feedback.className = "fs-3 font-title text-danger"; // Corrected class name
                        }
                    }
                });
            }
            
            if (resetPuzzle4Btn) {
                resetPuzzle4Btn.addEventListener('click', () => {
                    playClickSound(); 
                    initGame4Puzzle();
                });
            }


            // --- Inisialisasi Semua Kuis & Game saat DOM load ---
            loadSoundQuestion(currentSoundQuestion);
            initPuzzle();
            createMemoryBoard();
            initGame4Puzzle();
            resetEggGame(); 

        });
    </script>
</body>
</html>


